Using Code First Migrations. The first step is to enable migrations for our context.

Run the Enable-Migrations command in Package Manager Console

This command has added a Migrations folder to our project.

The folder includes the Configuration class. This class allows you to configure how Migrations behaves for your context. For this walkthrough we will just 
use the default configuration. Because there is just a single Code First context in your project, Enable-Migrations has automatically 
filled in the context type this configuration applies to.

Code First Migrations uses a snapshot of the model stored in the most recent migration to detect changes to the model. Since we are going to assume that 
databases already have the schema of the current model, we will generate an empty (no-op) migration that has the current model as a snapshot.

Add-Migration InitialCreate –IgnoreChanges

Then

Update-Database

We need to scaffold a migration to take care of the new tems we have added. The Add-Migration command allows us to give these migrations 
a name, let’s just call ours TokenAuthentication.

Add-Migration TokenAuthentication

The Designer Code for this migration file includes a snapshot of your current Code First model. This snapshot is used to calculate the 
changes to your model when you scaffold the next migration. If you make additional changes to your model that you want to include in this 
migration, then you can re-scaffold it by running 'Add-Migration TokenAuthentication' again.

Run the Update-Database command in Package Manager Console to apply this migration to the database.

Specify the '-Verbose' flag to view the SQL statements being applied to the target database.
Applying explicit migrations: [201711241555349_TokenAuthentication].
Applying explicit migration: 201711241555349_TokenAuthentication.
Running Seed method.

Getting a SQL Script
If another developer wants these changes on their machine they can just sync once we check our changes into source control. Once they have our 
new migrations they can just run the Update-Database command to have the changes applied locally. However if we want to push these changes out to 
a test server, and eventually production, we probably want a SQL script we can hand off to our DBA.

Run the Update-Database command but this time specify the –Script flag so that changes are written to a script rather than applied. We’ll also 
specify a source and target migration to generate the script for. We want a script to go from an empty database ($InitialDatabase) to the latest 
version (migration TokenAuthentication). If you don’t specify a target migration, Migrations will use the latest migration as the target. If you 
don't specify a source migrations, Migrations will use the current state of the database.
Run the Update-Database -Script -SourceMigration: $InitialDatabase -TargetMigration: TokenAuthentication command in Package Manager Console
Code First Migrations will run the migration pipeline but instead of actually applying the changes it will write them out to a .sql file for you. 
Once the script is generated, it is opened for you in Visual Studio, ready for you to view or save.

Ex:

Enable-Migrations
Add-Migration InitialCreate –IgnoreChanges
Update-Database
Add-Migration FBAccess
Update-Database

----

Add-Migration FBAccess_CompositeKey
Update-Database

----

On a new Server, code-first cannot create DB : err : CREATE DATABASE permission denied in database 'master'.
but Update-Database creates DB and applies all migrations

---

VS > Tools > NuGet Package Manager > Package Manager Console : Default project : ArabicTextAnalyzer
Add-Migration ThemePerUser
Update-Database

---

VS > Tools > NuGet Package Manager > Package Manager Console : Default project : ArabicTextAnalyzer
Add-Migration ThemeKeyWordWithType
Update-Database

---

VS > Tools > NuGet Package Manager > Package Manager Console : Default project : ArabicTextAnalyzer
Add-Migration ArabiziIsFR
Update-Database

---

VS > Tools > NuGet Package Manager > Package Manager Console : Default project : ArabicTextAnalyzer
Add-Migration ArabiziTheme
Update-Database

---

VS > Tools > NuGet Package Manager > Package Manager Console : Default project : ArabicTextAnalyzer
Add-Migration ThemeKeyWordWithCount
Update-Database

---

VS > Tools > NuGet Package Manager > Package Manager Console : Default project : ArabicTextAnalyzer
rename Configuration.cs to Configuration.orig.cs
Enable-Migrations -ContextTypeName ArabicTextAnalyzer.Models.ApplicationDbContext
rename new Configuration.cs to ConfigurationApplicationDbContext.cs
rename back Configuration.orig.cs to Configuration.cs
Add-Migration LastLoginTime_ArabiziDbContext -ConfigurationTypeName Configuration
Update-Database -ConfigurationTypeName Configuration

---

VS > Tools > NuGet Package Manager > Package Manager Console : Default project : ArabicTextAnalyzer
Add-Migration UserGuid_ArabiziDbContext -ConfigurationTypeName Configuration
Update-Database -ConfigurationTypeName Configuration

/*
add-migration InitialCreate_ApplicationDbContext -IgnoreChanges -ConfigurationTypeName ConfigurationApplicationDbContext
update-database -TargetMigration InitialCreate_ApplicationDbContext -ConfigurationTypeName ConfigurationApplicationDbContext
Update-Database -Script -SourceMigration: $InitialDatabase -TargetMigration: TokenAuthentication -ConfigurationTypeName ConfigurationApplicationDbContext
Update-Database -ConfigurationTypeName ConfigurationApplicationDbContext
add-Migration LastLoginTime_ApplicationDbContext -ConfigurationTypeName ConfigurationApplicationDbContext
Add-Migration InitialCreate –IgnoreChanges ?
Add-Migration LastLoginTime -ConnectionString DefaultConnection -Verbose
Add-Migration LastLoginTime -ConnectionString "Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\aspnet-ArabicTextAnalyzer-20170518103120.mdf;Initial Catalog=aspnet-ArabicTextAnalyzer-20170518103120;Integrated Security=True;User Instance=True" -ConnectionProviderName "System.Data.SqlClient"
Add-Migration LastLoginTime -ConnectionString "Data Source=.\SQLEXPRESS;Initial Catalog=ArabiziDB;Integrated Security=True" -ConnectionProviderName "System.Data.SqlClient"
Add-Migration ThemeKeyWordWithCount
Update-Database*/

---

VS > Tools > NuGet Package Manager > Package Manager Console : Default project : ArabicTextAnalyzer
Add-Migration isDeleted_ArabiziDbContext -ConfigurationTypeName Configuration
Update-Database -ConfigurationTypeName Configuration

---

VS > Tools > NuGet Package Manager > Package Manager Console : Default project : ArabicTextAnalyzer
Add-Migration contrib_ArabiziDbContext -ConfigurationTypeName Configuration
Update-Database -ConfigurationTypeName Configuration

---

/*VS > Tools > NuGet Package Manager > Package Manager Console : Default project : ArabicTextAnalyzer
add-migration InitialCreate_ApplicationDbContext -IgnoreChanges -ConfigurationTypeName ConfigurationApplicationDbContext
Add-Migration fullName -ConfigurationTypeName ConfigurationApplicationDbContext
NOT WORKING : (but row added in __MigrationHistory and clones tables created with prefix "ArabicTextAnalyzer.Models.ArabiziDbContext.*")

MigrationId	ContextKey	Model	ProductVersion
201804151400443_InitialCreate	ArabicTextAnalyzer.Models.ArabiziDbContext	0x1F8B0800000000000400ED5D596F23B9117E0F90FFD0D05312CC5A9E99204806F62E34926757595FB034575E0C5AA2E54EFAD0F631B127C82FCB437E52FE42D837EF269BEC766B120C30B0D8E4C72259556491C5E27FFEF5EF931F1E7DCFF902A3D80D83D3C9CBA3E38903834DB87583DDE9244DEEBFFBE3E487EF7FFDAB93B3ADFFE87CA8F2BDCEF2A192417C3A794892FD9BE934DE3C401FC447BEBB89C238BC4F8E36A13F05DB70FAEAF8F84FD3972FA710414C1096E39CDCA441E2FA30FF817ECEC36003F7490ABC8B700BBDB84C475F5639AA73097C18EFC1069E4E6611B873376BF898CC02E03D7D85D1D122F4811B1C156527CECC7301A26B05BDFB890382204C4082A87EF33E86AB240A83DD6A8F1280B77EDA4394EF1E78312C5BF3A6C9AEDAB0E35759C3A64DC10A6A93C609224C0FF0E5EBB2A7A674F14EFD3DA97B32EF657FEFC1C7ACD979879E4EB25E3C4323913C4D1CBABE37732FCAB2CA7ABC29FFC211E67A51B30DE2AEECDF0B679E7A491AC1D300A64904BC17CE757AE7B99B9FE1D33AFC1B0C4E83D4F370D211F1D751B88751F254523E0F11074D9C82C06590FCE1F713E7129502771EAC87742A8528085F6E2B14C41B88E927CE05783C87C12E79389DA03F27CE3BF7116EAB9412F97DE02219418592286DADE80206C500F65CCF6518F9C073BFC2FE9B94C15BAEE4648AF1279E5E8C13C6B573CF453D8A9825EEC6B5859E386A607A675EF48D48C03AF406DE33CD5A2E98FE9FD2108C4010A56BB978FD8A23175877AD9230823FC200462081DB6B902430429A6AB985A55A90F3C10DDCB9312A32DBEF1B412AAB95972CE81D40FA8A8A567013C1A4FFCA2298F5E3552DEC0BF4738D66BAB682686E8A9A81B347DF25F8E2EEF2A1168F1C12A31BE8E599E207775FCC9C9878DC9279DF45A17F137A04CF11596E57611A6D32FD10CAF3AD41B4CB068554038DBC4BB5008664A406309C71E8014AA67415814C247BD404D9FF16D857730E5F23EA3DD4D239F0BC73D77793B606ABC3A135699CFAB0B50B0F4921280BD7C5EDEC66F676395FCC6E967F9E9D5DAE6F3EDF9ECFD6CBCB8F57370B237193228F4300970B79EB7525B20DAFE8B91F5377ABCD5E3C6823C073349EC1C730EA7F5EFE00221704494CAFE43B08D9451827D7E13EF54054A2F6BF008E40107B609075FD325E400F267AAAC848D4D7679FD6E8AFE5FAB375596FA0472CEC78FBAD483B0E382671C737004A2ECED67E78B22E894333AB6D0E1D2F5BDAE1452B0CF897A53956D1CD0BA4B0FF0AB2CEEEDF380B03047D3778BD8388443D22E6D250428D4B10EAF67595016B2CFBD51D846BCABAD078474F99D1C01A10DA9AF9DD4D05F23644863908BAC8FFA7F5CD7CBDFEE9ECE2CC4C93F42C14EB8FCBCB1FCF3FCFE6F3ABF7976B43B120C14623182459B7B3EBE5EDCF67DD4444046530C299056B6957405ED10659EBF1ED7D04A1A1AD9E46110C92D92671BFD8DFDD56E6DC46C0B221B06070B380A3E1605E5B3B702F0FC66C956349CB21DAFF3E84315DD673DBC3B98CB8320B967BDFB3003E8C96646884B26328336616E403F4E1206ABE4FF53CDC81CCA002809D05645BDAA809E7E1CED6694983380E91E09266788242020D759692F35EFF9346F7C3DB7CA0E20B10801D2E254A6533FBA5F3A9C8054C1EC26D3FEAA6FB5129976184A7A6EDB99903548522BCB35459A38821D469165DB0AD61647EC5A651858C0E8A092C23E547208D43E93192A8ABECE4A2DCA392CB2B46D40D30C5C669175D73F6B8772318EB17CCB45B37F5D65D2333EB08E51D9EEE6A8F601DA1BA13E762748124AB1557916C5EB5B2FAC980C621FFD5325557ECC9E5ED304B9A60082BE11AC4F1202677B186E1C9B8AE1F2A62196F0053E31CC4099A5BDDA0A052DF1DA5B00F956D459178CEE238DCB83957112E7AACAB1949D159B07514FDCE9A934CDC57F402C9A0BB475287883A9DFC8E69727B059516C22A20DCD0C81A8E8F8E5E329520D1859919EB82DCC30829033748583977838DBB079E1A3D54717DAFB26CB0EA3AE92F0BB8874126E66ABD6F8598BA4E4AADB5F5DEC914E32E39D3292CDA45ECA1B382E7720A6E8CAB73A58615303483AA93362CAFAA8FD4A1B0AD64D125E21B951518E6FB419A4BEAECA9B07A1B9A2DDB491A961DDB47E250D850696F404F9189360A7AD7A082CD065599E85B8BF2C953619496CD010B9A943F669668B3CEC6C57A347303422560443A5A2CEEB20FB967076321A2D56F6924C6E55A9BE6B00C78051366413B719A45306749CA702A8943DAD40C12A1435BA0A47ED73CF01617F00ED5354E90AAF549FC30152A54AC4515BA742092A08A7C945840D2DD820F497BB0B482B2A7E07C6085437719781BA80E5737AAA485BF717DDF024F296B0695FAAE486C6600CB682CF69628304C0FF19403B56786E56EB98345AB4A75D3B86E1EA9A418E5AB6E0B63886473E82D29B233143A4AE55885ED335DBBAEAB65C76F37C1D0925ED5B0E5FAEB60D9062EDBB1AA9687AEED81B54F2A9ABAC6C6D08C491F8CA9B2A66CD1DC7DD9DC077B0A16CAAA0328E9E96AAFB05E9BD5DF4EA64508883221BB25CE8D15717201F67B4427163BA24C715645E088F9772BFD180A7E8131DD100343AF24EB9A9230422DA7BE669EE75BF8CE8DE26401127007B29DD2F9D667B2312B51C1D45455C72C36D901AD66ABAA48F637EE7EAF743F9EB3A02FF1DEA1E6FA9991901F0FF02717A6B09385F5001E88A457D8E7A197FA01EF0BCDB76244CA52C6215B8CE8362A69B8265517A9BA99CEA2555F34101BBF0A02AE4956C7AA4E887020FE69538E31A53882B1E6185EA47403CDDD4ABCDF320B19703F6E5BE9B3BFB4F490DC5AB8CAE050458A3A02E78A350EC7F9DC0DBBB96F2D826F72FC5F228412D162E75B9511F91681BED468E289C6A9EDBE353E7E7A77BD756B6DAF4BA706EC6E360E8B25AB6351B7AF713CEA933A26EF1A360ECCFBAEA12BF01BD7848AC03F688C57E331430C52933C6A99C637D37A176A6C1FCE8E54CB00B5C41ADF216C956BF176A26EBD9D05BB8C71D5720D5B71A8B0629CBA8453222BF20DD0AD44EA4580677520350166934107B60E9B2640ADBFEB80E231D204B878161DE8E2EE8D00B4F8C8658929C513FF231AAC7FB5654757992928BB2B00E62E330F5C700A21C365AFC4E3C0EC578DF5B7E8CE3DB11A1765FA9667F3FA38A90F31A878A0B30408019E8535AB2BF70C57561FB4F1CE9A6BF51C50ECAB0E0B66F7EB49EECB52B4C41B3F46A37A507CC226A7EA8004833E16B52C1AD4896A17E16883900CADE88A3D35CC6A97FA65753517EFE99D0ADDBD1FFC663D8E85A76BCC05E4054E6206203F8D88257987EA96D992731EDF8535556094344FE31520D44022C701E53A2C69B7FA7E3D8E56276AE3DCB26B78F28B3E22C7DAA23E7DA3BA1C7718E94D600C05A5A38058625EECEA3C613536C9C3E8563BFBDDDF00D30A0ECAFB3A57C27C9A8C4E9864380A674DE41D77C1A993EC467D2B0F6D393CA485D2C7C918E3804A1E3BB578A78A71A9FBED382AF54963671DBBF64EECA863E9A39122D207C4AAF048A11584A6A5FCD0ACD25C816600F3541D255BDD7126756C95AA8E84DD7AC6A1B064BDC357D1E9ABBE10F4A1040E70722A1C517B9993721FD6EE5311BF78BFAB8BE65E318D1368AEA09A8BC3385293AAEB73C07739D014C6EA6A30218A55A2CEC93171F5973C3D263EE9F57C710B98EEF9227560C1613C08E92C75ED654AFDBBF6202CBDF7DA9FA062DCF98A2C130775D117779BB9F2AD9E9044F8475986A3D52F5EE1D0D56440D3857B0FE3A4B8FC3F7975FCF215F56ED578DE909AC6F196884D207D91871CB1677AF8C6CDFABA356281E63D7D6E708EBC26E6BED032D8C2C7D3C93FF2926F9CE5A75BA2F00BE72A424CF0C63976FE8993A1FE9C4D4340F005449B0710FDC6078FBFED0646BE8D6306480776DAA29F091515413FFC9A064D9DDE8FE9C0B47DBCD2D20BDB16D6414B3F9A3DB692D36DF1A9952E7807C4791A6E6E637EB0240DDC5F52E8E67C79EF66EEFE165F333006671E3231D26BDCC74ABAB0A9F8A91223FA38CF9118E131E1A4DADB6AEBC1115BFC3FC01B1EE39600D6A9AB00BE73779D1436CF9FCB06EB723CBAECC2B2EF62DA422E0E850E4FDEC6F922893571A29E7A30C615BD1862B65496BF46327676E23A083DEF931E76C6997CDEC36818444F78F096A6DA4F78DCB9FA3A9C1BF6DB5CEC7AE53699C7CDF85ECA30EE4CFAD50C2306645FC6E8645AF102AFF76318B5F9B08CE761091B93550FB2483D3861C43DBC4725AC001A5B51FD6A1C917FC8F3BDCC606E0BD0AF34982D5D0C1582C54D97617943C1E9625C6F15F4B2A3483E4F603458E3D85317C44057A5832A6E4209F77184AE3B99EC63097D4CDA129F8AE70D61DF0BEFD351EB0D55151999BEEB403391EABB02B191EBBB228D43B099B9A0DD68EA1654BE03DBDB89DCDE9B820F6C2D16E880EC16CE17E5ECD925E8BA1151DCC0EA26C74F78A075CDA55F7F41D7896093056D9D02F9F222CB750ED96E1A66F5D942A71F78A0DF67E2184140483EB64E88E003E3235527F271B2548710E6F659898A5487616A06403F30D66973A11E27CB18851BEF38D407A58BF487B5F7E0E00716069C8DD1488F3C19185839C677E11CCA75C32EFDAFD908E4EB6281D72D54785BA4700382A4815469925A22883344B6E437207BDD632CF30EA1CC2DB7C42C4ABA6A9074BB44AB525A1FF18A88AC3398D3D7357CBB52F47623F22C8482578E046F44A86168F9D6C8F29688D3D1A6F8D42DD3AB783E3B1A5612ACD934E8BD493F5261AE157BB2888F2FECC0E2B3857E1B491C7ECE74CC048665D73AFCBD11ACB864417068F1F53B758B542E25F7A2CD3B6B8058F9A69DC3D5014661D9F538A7F700F81D1B38300769C4B2676F9C21B3260DB27DE3E2D702C6EEAE8138419801DC10064D9D6719DC87958145515465610F08C116593BB32871EFC126419F37308EDDECF9D10FC04BF37DF23BB85D065769B24F13D464E8DF79C4CDE4CC3E93D59F07EC27693EB9DAE72F09DB680222D3DDE647026F53D7DBD674BFE36C8D0B2032C3AF3C3CC9C632C90E51764F35D26518280295DD57DBAB6BE8EF3D04165F052B90394AE8D38666B373B8039BA7EAE2A018A47D20C86E3F59B86017013F2E319AF2E827E2E1ADFFF8FD7F0116E53B2A21A40000	6.1.3-40302

One or more validation errors were detected during model generation:

ArabicTextAnalyzer.Models.IdentityUserRole: : EntityType 'IdentityUserRole' has no key defined. Define the key for this EntityType.
ArabicTextAnalyzer.Models.IdentityUserLogin: : EntityType 'IdentityUserLogin' has no key defined. Define the key for this EntityType.
IdentityUserRoles: EntityType: EntitySet 'IdentityUserRoles' is based on type 'IdentityUserRole' that has no keys defined.
IdentityUserLogins: EntityType: EntitySet 'IdentityUserLogins' is based on type 'IdentityUserLogin' that has no keys defined.
*/
Manually add FullName in apsnet db : nvarchar(256) null in DB aspnet-ArabicTextAnalyzer-20170518103120 in table AspNetUsers
plus fk_activity bit null, plus City nvarchar(256) null, plkus Country nvarchar(256) null
actually fk_activity_id int null, cant drop/change fk_activity col 

// to build an index on fb comments 
ALTER TABLE FBFeedComments
ALTER COLUMN feedId varchar(150);

//
ALTER TABLE T_FB_POST
ALTER COLUMN fk_influencer varchar(150);

---

VS > Tools > NuGet Package Manager > Package Manager Console : Default project : ArabicTextAnalyzer
Add-Migration fbNERs_ArabiziDbContext -ConfigurationTypeName Configuration
=> PB : MoveTable(name: "[ArabicTextAnalyzer.Models.ArabiziDbContext].ClientKeys", newSchema: "dbo"); ???!!!
=> SOL : I have commentted the MoveTable but kept AddColumn FK_ENTRY & ENTRY_type
Update-Database -ConfigurationTypeName Configuration

---

VS > Tools > NuGet Package Manager > Package Manager Console : Default project : ArabicTextAnalyzer
Add-Migration configKeywords_ArabiziDbContext -ConfigurationTypeName Configuration
Update-Database -ConfigurationTypeName Configuration