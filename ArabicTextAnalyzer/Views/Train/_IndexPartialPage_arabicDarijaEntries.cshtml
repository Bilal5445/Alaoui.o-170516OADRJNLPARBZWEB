<!-- Nav tabs -->
@using OADRJNLPCommon.Models;

@{ List<T_FB_INFLUENCER> FbInfluencer = ViewBag.AllInfluence;

    int MaxFbPageAllowed = 2;
}
<style>
    /*td.details-control {
        background: url("https://datatables.net/examples/resources/details_open.png") no-repeat center center;
        cursor: pointer;
    }*/

    tr.shown {
        background-color: #f3c589 !important;
    }
</style>
<ul class="nav nav-pills" role="tablist">
    <li role="presentation" class="active mainUL"><a href="#first" aria-controls="first" role="tab" data-toggle="tab">Working Data</a></li>
    @if (FbInfluencer != null && FbInfluencer.Count > 0)
    {
        foreach (var item in FbInfluencer)
        {
            <li role="presentation" class="mainUL" id="@item.id"><a aria-controls="second" role="tab" data-toggle="tab" style="cursor:pointer;" onclick="LoadFacebookPosts('@item.id')">@item.name</a></li>
        }
    }
    @if (FbInfluencer == null || FbInfluencer.Count < MaxFbPageAllowed)
    {
        <!-- Plus -->
        <li role="presentation" class="mainUL"><a data-toggle="modal" data-target="#myModalForaddInfluencer" data-backdrop="static" data-keyboard="false"><span class="glyphicon glyphicon-plus"></span></a></li>
    }

    <!--<li role="presentation" class="dropdown">
        <a aria-controls="second" role="tab" class="dropdown-toggle" data-toggle="dropdown" href="#second">Facebook Page - Taoufik Bouachrine توفيق بوعشرين<span class="caret"></span></a>
        <ul class="dropdown-menu">
            <li><a href="#">Retrieve new data</a></li>
        </ul>
    </li>-->
</ul>

<div class="tab-content" style="border: 1px solid black; padding: 15px; background-color: #fffeef;">
    <div role="tabpanel" class="tab-pane active" id="first">
        <!-- table of posts -->
        <table class="posts datatables-table table table-striped table-hover table-bordered">
            <thead>
                <tr class="header">
                    <th class="center top col50px">#</th>
                    <th class="center top col110px">Date</th>
                    <th class="center top col50prc">Arabizi</th>
                    <th class="center top col50prc">Arabic</th>
                    <th class="center top col100px">NER Types</th>
                    <th class="center top col130px">Entities</th>
                    <th class="center top col75px"></th>
                </tr>
            </thead>
            <tfoot>
                <tr class="header">
                    <th class="center top">#</th>
                    <th class="center top">Date</th>
                    <th class="center top">Arabizi</th>
                    <th class="center top">Arabic</th>
                    <th class="center top">NER Types</th>
                    <th class="center top">Entities</th>
                    <th class="center top"></th>
                </tr>
            </tfoot>
        </table>
    </div>
    @if (FbInfluencer != null && FbInfluencer.Count > 0)
    {
        foreach (var item in FbInfluencer)
        {
            <div role="tabpanel" class="tab-pane" id="second_@item.id">
                @*@using (Html.BeginForm("FetchFBData", "Train", FormMethod.Post, new { @class = "form-inline", style = "margin-bottom: 15px;" }))
                    {*@
                <div class="form-group">
                    <a class="btn btn-outline-primary btn-xs" id="import_posts" onclick="RetrieveFBPost('@item.url_name','@item.id')">Retrieve new data <span class="glyphicon glyphicon-refresh"></span></a>
                </div>
                @*}*@
                <table class="posts-fb datatables-table-fb table table-striped table-hover table-bordered table_@item.id">
                    <thead>
                        <tr class="header">
                            <th class="center top col50px">vacd</th>
                            <th class="center top col50px">#</th>
                            <th class="center top col110px">Influencer Id</th>
                            <th class="center top col50prc">Post Text</th>
                            <th class="center top col50prc">Translated Text</th>
                            <th class="center top col50prc">Total likes</th>
                            <th class="center top col100px">Total Comment</th>
                            <th class="center top col130px">Publishing date</th>
                            <th class="center top col75px">Action</th>
                        </tr>
                    </thead>
                </table>
            </div>
        }
    }

</div>

<div class="modal fade" id="myModalForaddInfluencer" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 style="color:red;">Add new influencer</h4>
            </div>
            <div class="modal-body">
                <div class="form-group row">
                    <div class="col-lg-12 form-group">
                        <label for="lgFormGroupInput" class="col-lg-4 col-sm-4 col-form-label col-form-label-lg">Influencer Name</label>
                        <div class="col-sm-8 col-lg-8">
                            <input type="text" class="form-control" placeholder="Enter url name" required="required" id="txtUrlName" />
                        </div>
                    </div>
                    <div class="col-lg-12 form-group">
                        <label for="lgFormGroupInput" class="col-lg-4 col-sm-4 col-form-label col-form-label-lg">Influencer Bias</label>
                        <div class="col-sm-8 col-lg-8">
                            <select required="required" id="ddlPro_or_anti" class="form-control">
                                <option value="">--Select any--</option>
                                <option value="Pro">Pro</option>
                                <option value="Anti">Anti</option>
                            </select>
                        </div>
                    </div>
                </div>
                <a class="btn btn-default btn-success" onclick="AddInfluencer()">Add</a>
            </div>
        </div>
    </div>
</div>
<br />